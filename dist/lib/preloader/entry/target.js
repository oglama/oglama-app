/*!
 * @architect Mark Jivko <mark@oglama.com>
 * @copyright Â© 2024-2025 Oglama (https://oglama.com)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Re=Object.defineProperty;var ce=u=>{throw TypeError(u)};var Fe=(u,s,e)=>s in u?Re(u,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[s]=e;var E=(u,s)=>()=>(s||u((s={exports:{}}).exports,s),s.exports);var a=(u,s,e)=>Fe(u,typeof s!="symbol"?s+"":s,e),he=(u,s,e)=>s.has(u)||ce("Cannot "+e);var i=(u,s,e)=>(he(u,s,"read from private field"),e?e.call(u):s.get(u)),f=(u,s,e)=>s.has(u)?ce("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(u):s.set(u,e),v=(u,s,e,t)=>(he(u,s,"write to private field"),t?t.call(u,e):s.set(u,e),e);var se=E((lt,ue)=>{var T;ue.exports=(T=class{static getSourceChannelName(s){return"".concat(T.WINDOW_SOURCE,"/").concat(s)}static getTargetChannelName(s){return"".concat(T.WINDOW_TARGET,"/").concat(s)}static generateKey(){return"".concat(Date.now().toString(36)).concat(Math.random().toString(36).substring(2,13))}},a(T,"WINDOW_MAIN_LOGIN","@main/login"),a(T,"WINDOW_MAIN","@main"),a(T,"WINDOW_SOURCE","@source"),a(T,"WINDOW_TARGET","@target"),T)});var O=E((ut,fe)=>{var{ipcRenderer:Be}=require("electron"),W,pe;fe.exports=(pe=class{constructor(){f(this,W,{})}_register(s){if(typeof s=="string")for(let e of Object.getOwnPropertyNames(this))["_","#"].includes(e[0])||typeof this[e]!="function"||(i(this,W)[e]="ipc:".concat(s,":").concat(e))}_runner(s,...e){let t=function(n,r,o){this.run=async function(){let l=null;if(typeof i(n,W)[r]=="string"&&(l=await Be.invoke(i(n,W)[r],...o)),l instanceof Error)throw new Error("".concat(i(n,W)[r]," ").concat(l.message??l));return l}};return new t(this,s,e)}async _promise(s,...e){return await this._runner(s,...e).run()}},W=new WeakMap,pe)});var me=E((dt,de)=>{var Ue=O();de.exports=class extends Ue{constructor(){super();a(this,"purge",e=>this._promise("purge",e));a(this,"runInit",(e,t=null,n=null,r=null)=>this._promise("runInit",e,t,n,r));a(this,"runDelete",(e,t)=>this._promise("runDelete",e,t));a(this,"sourceGet",e=>this._promise("sourceGet",e));a(this,"sourceSet",(e,t)=>this._promise("sourceSet",e,t));a(this,"inputsGet",(e,t=null)=>this._promise("inputsGet",e,t));a(this,"inputScalarsSet",(e,t)=>this._promise("inputScalarsSet",e,t));a(this,"inputFilesAdd",(e,t,n)=>this._promise("inputFilesAdd",e,t,n));a(this,"inputFilesDelete",(e,t,n)=>this._promise("inputFilesDelete",e,t,n));a(this,"inputTableQuery",(e,t,n=1,r=5e3)=>this._promise("inputTableQuery",e,t,n,r));a(this,"inputTableAdd",(e,t,n=[])=>this._promise("inputTableAdd",e,t,n));a(this,"inputTableGet",(e,t,n,r)=>this._promise("inputTableGet",e,t,n,r));a(this,"inputTableUpdate",(e,t,n,r)=>this._promise("inputTableUpdate",e,t,n,r));a(this,"inputTableDelete",(e,t,n=null)=>this._promise("inputTableDelete",e,t,n));a(this,"outputTableQuery",(e,t,n,r=1,o=5e3)=>this._promise("outputTableQuery",e,t,n,r,o));a(this,"outputTableAdd",(e,t,n,r)=>this._promise("outputTableAdd",e,t,n,r));a(this,"outputsGet",(e,t)=>this._promise("outputsGet",e,t));a(this,"outputsQuery",(e,t,n=null,r=null,o=null)=>this._promise("outputsQuery",e,t,n,r,o));a(this,"outputScalarSet",async(e,t,n,r)=>this._promise("outputScalarSet",e,t,n,r));a(this,"outputFilesInit",async(e,t,n,r=null)=>this._promise("outputFilesInit",e,t,n,r));a(this,"outputFilesAppend",async(e,t,n,r,o=null)=>this._promise("outputFilesAppend",e,t,n,r,o));a(this,"outputFilesDelete",async(e,t,n)=>this._promise("outputFilesDelete",e,t,n));this._register("diskStorage")}}});var we=E((wt,ge)=>{var Ge=O();ge.exports=class extends Ge{constructor(){super();a(this,"install",()=>this._promise("install"));a(this,"check",()=>this._promise("check"));this._register("updater")}}});var _e=E((bt,ye)=>{var He=O();ye.exports=class extends He{constructor(){super();a(this,"getOS",()=>this._promise("getOS"));a(this,"getName",()=>this._promise("getName"));a(this,"getUUID",()=>this._promise("getUUID"));a(this,"getSerialNumber",()=>this._promise("getSerialNumber"));a(this,"getRam",()=>this._promise("getRam"));a(this,"getCpuArch",()=>this._promise("getCpuArch"));a(this,"getCpuName",()=>this._promise("getCpuName"));a(this,"setPostAuth",e=>this._promise("setPostAuth",!!e));a(this,"getPostAuth",()=>this._promise("getPostAuth"));a(this,"showFileInFolder",e=>this._promise("showFileInFolder",e));this._register("device")}}});var ke=E((Ct,be)=>{var Ke=O();be.exports=class extends Ke{constructor(){super();a(this,"list",()=>this._promise("list"));a(this,"closeAll",()=>this._promise("closeAll"));a(this,"open",e=>this._promise("open",e));a(this,"close",e=>this._promise("close",e));a(this,"webContents",(e,t,n)=>this._promise("webContents",e,t,n));this._register("source")}}});var Ce=E((Mt,Ie)=>{var Ve=O();Ie.exports=class extends Ve{constructor(){super();a(this,"list",()=>this._promise("list"));a(this,"removeAll",()=>this._promise("removeAll"));a(this,"add",(e,t,n=!1)=>this._promise("add",e,t,n));a(this,"remove",e=>this._promise("remove",e));a(this,"select",e=>this._promise("select",e));a(this,"getSelected",()=>this._promise("getSelected"));a(this,"setControlled",(e,t=!0)=>this._promise("setControlled",e,t));a(this,"openDevTools",(e,t=null)=>this._promise("openDevTools",e,t));a(this,"getBounds",e=>this._promise("getBounds",e));a(this,"mouse",(e,t,n,r=null,o=!1,l=[])=>this._promise("mouse",e,t,n,r,o,l));a(this,"typeAt",(e,t,n,r,o=!1,l=50)=>this._promise("typeAt",e,t,n,r,o,l));a(this,"loadUrl",(e,t)=>this._promise("loadUrl",e,t));a(this,"getUrl",e=>this._promise("getUrl",e));a(this,"getTitle",e=>this._promise("getTitle",e));a(this,"reload",(e,t=!1)=>this._promise("reload",e,t));a(this,"goHome",e=>this._promise("goHome",e));a(this,"goBack",e=>this._promise("goBack",e));a(this,"goForward",e=>this._promise("goForward",e));a(this,"setFileInput",(e,t,n)=>this._promise("setFileInput",e,t,n));a(this,"waitForDomReady",(e,t=30)=>this._promise("waitForDomReady",e,t));a(this,"saveDownload",(e,t,n,r=600)=>this._promise("saveDownload",e,t,n,r));a(this,"webContents",(e,t,n)=>this._promise("webContents",e,t,n));a(this,"sendKeys",(e,t,n={})=>this._promise("sendKeys",e,t,n));this._register("target")}}});var $e=E((St,Ee)=>{var je=O();Ee.exports=class extends je{constructor(){super();a(this,"openExternal",e=>this._promise("openExternal","".concat(e)));this._register("main/login")}}});var xe=E((vt,Me)=>{var ze=O(),Qe=$e();Me.exports=class extends ze{constructor(){super();a(this,"login",null);a(this,"setOnTop",(e=!0)=>this._promise("setOnTop",!!e));a(this,"getOnTop",()=>this._promise("getOnTop"));a(this,"setDarkMode",e=>this._promise("setDarkMode",!!e));a(this,"getDarkMode",()=>this._promise("getDarkMode"));a(this,"getProcessVersions",()=>this._promise("getProcessVersions"));a(this,"quit",()=>this._promise("quit"));a(this,"openExternal",e=>this._promise("openExternal","".concat(e)));a(this,"showOpenDialog",(e,t=[],n=!1)=>this._promise("showOpenDialog",e,t,n));this._register("main"),this.login=new Qe}}});var Se=E((Dt,Ae)=>{var Xe=O();Ae.exports=class extends Xe{constructor(){super();a(this,"install",e=>this._promise("install",e));a(this,"getPort",()=>this._promise("getPort"));this._register("llm")}}});var ve=E((Lt,Ne)=>{var{ipcRenderer:J,contextBridge:Ye}=require("electron"),Je=me(),Ze=we(),et=_e(),tt=ke(),it=Ce(),st=xe(),nt=Se(),D=se(),$,B,I,U,Te;Ne.exports=(Te=class{constructor(s,e=!0){f(this,$,"");f(this,B,{});f(this,I,{});f(this,U,{});a(this,"source",{send:(s,e,t)=>{this.send(D.getSourceChannelName(s),e,t)},invoke:async(s,e,t,n=0)=>await this.invoke(D.getSourceChannelName(s),e,t,n)});a(this,"target",{send:(s,e,t)=>{(async()=>this.send(D.getTargetChannelName(s),e,t))()},invoke:async(s,e,t,n=0)=>await this.invoke(D.getTargetChannelName(s),e,t,n)});let t=this;v(this,$,s),v(this,U,{ibc:{handle:(...n)=>this.handle.call(this,...n),send:(...n)=>this.send.call(this,...n),invoke:async(...n)=>await this.invoke.call(this,...n),source:{send:(...n)=>this.source.send.call(this,...n),invoke:async(...n)=>await this.source.invoke.call(this,...n)},target:{send:(...n)=>this.target.send.call(this,...n),invoke:async(...n)=>await this.target.invoke.call(this,...n)},winName:i(this,$)},ipc:{diskStorage:new Je,updater:new Ze,device:new et,source:new tt,target:new it,main:new st,llm:new nt},devMode:!1}),J.on(i(this,$),(n,r)=>{if(r[0]==="ibc-target:cancel-promises"&&typeof r[1]=="string"){for(let b of Object.keys(i(this,I)))if(i(this,I)[b].toWinName===D.getTargetChannelName(r[1])){try{typeof r[2]=="string"?i(this,I)[b].reject(new Error(r[2])):i(this,I)[b].resolve(null)}catch{}delete i(t,I)[b]}return}if(r.length<3)return;let[o,l,h]=r,{type:p,fromWin:x,promiseId:_}=h??{};if(p==="req")(async()=>{let b=null;try{if(typeof o!="string"||typeof i(t,B)[o]!="function")throw new Error('Inter-Browser Communication: handle "'.concat(o,'" not declared yet'));Array.isArray(l)||(l=[]),b=await i(t,B)[o](...l)}catch(A){let k=i(t,$).indexOf(D.WINDOW_TARGET)===0?"ibc.target.invoke":i(t,$).indexOf(D.WINDOW_SOURCE)===0?"ibc.source.invoke":i(t,$);b=new Error("".concat(k,"(").concat(JSON.stringify(o),") ").concat(A.message??A)),i(t,$).indexOf(D.WINDOW_TARGET)===0&&console.warn("".concat(o,"() ").concat(A.message??A))}typeof x=="string"&&typeof _=="string"&&J.send(x,o,b,{type:"res",promiseId:_})})();else{let b=typeof _=="string"?"".concat(o,":").concat(_):null;if(b!==null){let A=i(t,I)[b]??null;A!==null&&(l instanceof Error?A.reject(l):A.resolve(l),delete i(t,I)[b])}}}),e&&Ye.exposeInMainWorld("sdk",i(this,U))}getSdk(){return i(this,U)}handle(s,e){typeof s=="string"&&typeof e=="function"&&(i(this,B)[s]=e)}send(s,e,t){do{if(typeof s!="string"||typeof e!="string")break;Array.isArray(t)||(t=[]),J.send(s,e,t,{type:"req",fromWin:i(this,$)})}while(!1)}async invoke(s,e,t,n=0){let r=this;if(typeof s!="string"||typeof e!="string")return null;Array.isArray(t)||(t=[]),n=parseInt(n,10),(!Number.isInteger(n)||n<0)&&(n=0);let o=D.generateKey(),l=new Promise((h,p)=>{i(this,I)["".concat(e,":").concat(o)]={resolve:h,reject:p,toWinName:s}});return n>0&&setTimeout(()=>{let h=typeof o=="string"?"".concat(e,":").concat(o):null;if(typeof i(r,I)[h]<"u"){try{i(r,I)[h].reject(new Error("".concat(e,"() timed out")))}catch{}delete i(r,I)[h]}},n*1e3),J.send(s,e,t,{type:"req",fromWin:i(this,$),promiseId:o}),l}},$=new WeakMap,B=new WeakMap,I=new WeakMap,U=new WeakMap,Te)});var De=E((Bt,Oe)=>{var j=se(),rt=ve(),q=150,m,d,L,G,w,y,c,R,g,Z,z,M,H,P,ee,Q,X,N,F,Y,Pe;Oe.exports=(Pe=class{constructor(s){f(this,m);f(this,d);f(this,L,new WeakMap);f(this,G,new Map);f(this,w,{x:0,y:0,name:null});f(this,y,new AbortController);f(this,c,async s=>{if(i(this,y).signal.aborted)throw v(this,y,new AbortController),new Error("action aborted");await new Promise(e=>setTimeout(e,s))});f(this,R,s=>{if(!(s instanceof Element)||!s.isConnected)return null;let e=i(this,L).get(s);return typeof e!="string"&&(e=j.generateKey(),i(this,L).set(s,e),i(this,G).set(e,s)),e});f(this,g,s=>{if(typeof s!="string")return null;let e=i(this,G).get(s);return typeof e!="object"?null:!(e instanceof Element)||!e.isConnected||s!==i(this,L).get(e)?(i(this,L).delete(e),i(this,G).delete(s),null):e});f(this,Z,s=>{let e=i(this,g).call(this,s),t=null,n=(o,l)=>typeof l=="string"&&o===document.querySelector(l),r=o=>{let l=o.tagName.toLowerCase();if(n(o,l))return l;for(let p of o.attributes)if((["type","name","role","aria-label","aria-labelledby","for"].includes(p.name.toLowerCase())||p.name.toLowerCase().indexOf("data-")===0)&&(l+="[".concat(p.name,'="').concat(CSS.escape(p.value),'"]'),n(o,l)))return l;let h=l;for(let p of o.classList)if(l+=".".concat(CSS.escape(p)),n(o,l))return l;return h};do{if(!(e instanceof Element))break;let o=e.id?"#".concat(CSS.escape(e.id)):null;if(n(e,o)){t=o;break}let l=r(e);if(n(e,l)){t=l;break}let h=e,p=l;for(;h.parentElement;){h=h.parentElement;let x=r(h),_=Array.from(h.parentElement?.children??[]);if(_.length&&(x+=":nth-child(".concat(_.indexOf(h)+1,")")),p="".concat(x," > ").concat(p),n(e,p)){t=p;break}}}while(!1);return t});f(this,z,()=>{let s=[];for(let e of[...document.querySelectorAll("select[multiple]")])if(i(this,X).call(this,e,0)){let{left:t,top:n,width:r,height:o}=e.getBoundingClientRect();s.push({x:parseInt(t,10),y:parseInt(n,10),w:parseInt(r,10),h:parseInt(o,10)})}return s});f(this,M,async(s,e,t=null,n=!1)=>{if(await i(this,c).call(this,10),s=parseInt(s,10),e=parseInt(e,10),!Number.isInteger(s)||!Number.isInteger(e))return!1;s<0&&(s=0),e<0&&(e=0),["click","double-click"].includes(t)||(t=null);let r=await i(this,d).ipc.target.mouse(i(this,m),s,e,t,n,i(this,z).call(this));return v(this,w,{x:s,y:e,name:t}),r});f(this,H,async(s,e)=>{let t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,r=s<100?1:s>t-100?0:Math.floor(Math.random()*2),o=e<100?1:e>n-100?0:Math.floor(Math.random()*2),l=Math.abs(s+(r?1:-1)*(10+Math.floor(Math.random()*41))),h=Math.abs(e+(o?1:-1)*(10+Math.floor(Math.random()*41))),p=await i(this,M).call(this,l,h);return await i(this,c).call(this,150),p});f(this,P,s=>{if(!(s instanceof Element))return null;let{left:e,top:t,width:n,height:r}=s.getBoundingClientRect(),o=Math.floor(e+n/2+(n>4?-1+Math.floor(Math.random()*3):0)),l=Math.floor(t+r/2+(r>4?-1+Math.floor(Math.random()*3):0));return{x:o,y:l,left:e,top:t}});f(this,ee,s=>{let e=!1;do{if(!(s instanceof Element))break;let t=s.tagName.toLowerCase();if(s.isContentEditable||t==="textarea"){e=!0;break}if(t==="input"&&["text","search","email","url","tel","password","number"].includes(s.type.toLowerCase())){e=!0;break}}while(!1);return e});f(this,Q,s=>{let e=!1;do{if(!(s instanceof Element))break;let t=getComputedStyle(s);e=s.offsetParent!==null&&t.display!=="none"&&t.visibility!=="hidden"&&t.opacity!=="0"}while(!1);return e});f(this,X,(s,e=1)=>{let t=!1;do{if(!(s instanceof Element))break;let n=s.getBoundingClientRect();t=n.top+n.height-e>0&&n.top+e<(window.innerHeight||document.documentElement.clientHeight)}while(!1);return t});f(this,N,async s=>{if(await i(this,c).call(this,50),!(s instanceof Element))return!1;await i(this,d).ipc.target.webContents(i(this,m),"sendInputEvent",[{type:"mouseWheel",x:i(this,w).x,y:i(this,w).y,deltaX:0,deltaY:(Math.floor(Math.random()*2)?1:-1)*(Math.floor(Math.random()*3)+1)}]),await i(this,c).call(this,50+Math.floor(Math.random()*51)),s.scrollIntoView({behavior:"instant",block:"center",inline:"center"}),await i(this,c).call(this,350+Math.floor(Math.random()*51));let e=i(this,P).call(this,s);return e!==null&&await i(this,M).call(this,e.x,e.y),!0});f(this,F,async(s,e=60)=>{let t=new Date().getTime(),n=!1;do{if(new Date().getTime()-t>=e*1e3){n=!1;break}if(n=await s(),n!==!1)break;await i(this,c).call(this,1e3)}while(!0);return n});f(this,Y,(s="GET",e={},t={},n=!0)=>{let r=typeof s=="string"?s.trim().toUpperCase():"GET";r.length||(r="GET");let o;if(!["GET","HEAD"].includes(r)){if(n)o=JSON.stringify(e);else if(o=new FormData,typeof e=="object"&&e!==null)for(let h of Object.keys(e))FormData.append(h,e[h])}let l={};if(typeof t=="object"&&t!==null)for(let h of Object.keys(t)){let p=h.toLowerCase().trim();p.length&&(l[p]=t[h])}return n&&(l["content-type"]="application/json"),{method:r,body:o,headers:l}});a(this,"controlled",async(s=!0)=>{s?i(this,y).signal.aborted&&v(this,y,new AbortController):i(this,y).signal.aborted||i(this,y).abort("Action cancelled"),await i(this,d).ipc.target.setControlled(i(this,m),!!s)});a(this,"query",async(s,e=null,t=null,n=!1)=>{if(await i(this,c).call(this,10),s=typeof s=="string"?s.trim():"",e=typeof e=="string"&&e.length?e.trim().toLowerCase():null,!s.length)return[];let r=typeof t=="string"?i(this,g).call(this,t):document,o=typeof r?.querySelectorAll=="function"?[...r.querySelectorAll(s)].filter(l=>l instanceof Element&&l.isConnected):[];return o.length&&n&&(o=o.filter(l=>{let{top:h,height:p}=l.getBoundingClientRect();return h+p>0})),o.length&&typeof e=="string"&&(o=o.filter(l=>l.innerText.toLowerCase().indexOf(e)!==-1)),o.map(l=>i(this,R).call(this,l))});a(this,"queryParent",async(s,e,t=null)=>{if(await i(this,c).call(this,10),e=typeof e=="string"?e.trim():"",t=typeof t=="string"&&t.length?t.trim().toLowerCase():null,!e.length)return null;let n=i(this,g).call(this,s);if(!(n instanceof Element))return null;let r=null;for(;r===null&&n&&n!==document;)n=n.parentElement,n&&n.matches(e)&&(typeof t!="string"||n.innerText.toLowerCase().indexOf(t)!==-1)&&(r=n);return i(this,R).call(this,r)});a(this,"querySiblings",async(s,e,t=null)=>{if(await i(this,c).call(this,10),e=typeof e=="string"?e.trim():"",t=typeof t=="string"&&t.length?t.trim().toLowerCase():null,!e.length)return[];let n=i(this,g).call(this,s);if(!(n instanceof Element))return[];let r=[],o=n.parentElement;if(document!==o)for(let l of Array.from(o.children))l&&l!==n&&l.matches(e)&&(typeof t!="string"||l.innerText.toLowerCase().indexOf(t)!==-1)&&r.push(i(this,R).call(this,l));return r});a(this,"queryAt",async(s,e,t,n=null)=>{if(await i(this,c).call(this,10),t=typeof t=="string"?t.trim():"",n=typeof n=="string"&&n.length?n.trim().toLowerCase():null,!t.length)return null;let r=null,o=null,l=[],h=[];for(;(o=document.elementFromPoint(s,e))&&!h.includes(o);){if(o.matches(t)&&(typeof n!="string"||o.innerText.toLowerCase().indexOf(n)!==-1)){r=i(this,R).call(this,o);break}h.push(o),l.push({element:o,display:o.style.display}),o.style.display="none"}return l.forEach(({element:p,display:x})=>{p.style.display=x}),r});a(this,"awaitPresent",async(s,e=null,t=null,n=60)=>(await i(this,c).call(this,10),await i(this,F).call(this,async()=>{let r=await this.query(s,e,t);return Array.isArray(r)&&r.length?r:!1},n)));a(this,"awaitNotPresent",async(s,e=60)=>(await i(this,c).call(this,10),await i(this,F).call(this,async()=>!(i(this,g).call(this,s)instanceof Element),e)));a(this,"awaitVisible",async(s,e=60)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);return t instanceof Element?await i(this,F).call(this,async()=>i(this,Q).call(this,t),e):!1});a(this,"awaitNotVisible",async(s,e=60)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);return t instanceof Element?await i(this,F).call(this,async()=>{let n=getComputedStyle(t);return!(t.offsetParent!==null&&n.display!=="none"&&n.visibility!=="hidden"&&n.opacity!=="0")},e):!0});a(this,"scrollIntoView",async s=>await i(this,N).call(this,i(this,g).call(this,s)));a(this,"getBox",async s=>{await i(this,c).call(this,10);let e=i(this,g).call(this,s);if(!(e instanceof Element))return null;let{top:t,left:n,width:r,height:o}=e.getBoundingClientRect();return{left:parseInt(n,10),top:parseInt(t,10),width:parseInt(r,10),height:parseInt(o,10)}});a(this,"getValue",async s=>{await i(this,c).call(this,10);let e=i(this,g).call(this,s),t=null;if(e instanceof Element){let n=e.closest("form")||document;switch(e.tagName.toLowerCase()){case"input":switch(e.type.toLowerCase()){case"checkbox":if(n){let r=n.querySelectorAll('input[type="checkbox"][name="'.concat(CSS.escape(e.name),'"]'));t=r.length>1?[...r].filter(o=>o.checked).map(o=>o.value):e.checked}break;case"radio":n&&(t=[...n.querySelectorAll('input[type="radio"][name="'.concat(CSS.escape(e.name),'"]'))].reduce((o,l)=>l.checked?l.value:o,null));break;case"file":t=[...e.files].map(r=>({name:r.name,size:r.size,type:r.type,lastModified:r.lastModified}));break;default:t=e.value;break}break;case"textarea":t=e.value;break;case"select":t=e.multiple?Array.from(e.selectedOptions).map(r=>r.value):e.value;break}}return t});a(this,"getAttributes",async(s,e=[])=>{await i(this,c).call(this,10);let t={},n=i(this,g).call(this,s);if(n instanceof Element)for(let r of n.attributes){let o=r.name.toLowerCase();(!e.length||e.includes(o))&&(t[o]="".concat(r.value))}return t});a(this,"getContent",async(s,e=!1)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s),n=null;return t instanceof Element&&(n=e?t.innerHTML:t.innerText),n});a(this,"getVisible",async s=>(await i(this,c).call(this,10),i(this,Q).call(this,i(this,g).call(this,s))));a(this,"getInViewport",async s=>(await i(this,c).call(this,10),i(this,X).call(this,i(this,g).call(this,s))));a(this,"getViewportSize",async()=>(await i(this,c).call(this,10),{width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}));a(this,"scroll",async(s,e=!0)=>(await i(this,c).call(this,10),s=parseInt(s,10),Number.isInteger(s)?(await i(this,d).ipc.target.webContents(i(this,m),"sendInputEvent",[{type:"mouseWheel",x:i(this,w).x,y:i(this,w).y,...e?{deltaX:0,deltaY:-s}:{deltaX:-s,deltaY:0}}]),await i(this,c).call(this,q),!0):!1));a(this,"scrollTo",async(s,e=0)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);if(!(t instanceof Element))return!1;await i(this,N).call(this,t),e=parseInt(e,10),Number.isInteger(e)||(e=0);let n=i(this,P).call(this,t);await i(this,M).call(this,n.x,i(this,w).y);let r=Math.round(e-t.getBoundingClientRect().top);return await i(this,d).ipc.target.webContents(i(this,m),"sendInputEvent",[{type:"mouseWheel",x:i(this,w).x,y:i(this,w).y,deltaX:0,deltaY:r}]),n=i(this,P).call(this,t),await i(this,M).call(this,n.x,n.top+10+Math.floor(Math.random()*11)),await i(this,c).call(this,q),!0});a(this,"chooseFiles",async(s,e)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);if(!(t instanceof Element)||t.tagName.toLowerCase()!=="input"||t.type.toLowerCase()!=="file"||(e=(Array.isArray(e)?e:[]).map(o=>"".concat(o).trim()).filter(o=>o.length),!e.length))return!1;let n=i(this,Z).call(this,s);if(typeof n!="string")return!1;await i(this,N).call(this,t);let r=await i(this,d).ipc.target.setFileInput(i(this,m),n,e);return await i(this,c).call(this,q),r});a(this,"saveRequest",async(s,e,t,n="GET",r={},o={},l=!0,h=600)=>{await i(this,c).call(this,10);let p="".concat(s,"-").concat(e),x=new Date().getTime(),{body:_,method:b,headers:A}=i(this,Y).call(this,n,r,o,l),{fileName:k,filePath:We,minSize:ne,maxSize:te}=await i(this,d).ipc.diskStorage.outputFilesInit(i(this,m),s,e,(S=>{let K=null;try{let V=new URL(S).pathname.match(/\.([\w]+)$/i);V&&(K=V[1])}catch{}return K})(t)),C=0,re=(S=null)=>{i(this,d).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[i(this,m),p,{fileName:k,totalBytes:C,progress:"100",done:!0,error:S}])};try{if(i(this,y).signal.aborted)throw new Error('Download cancelled for "'.concat(k,'"'));i(this,d).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[i(this,m),p,{fileName:k,totalBytes:C,progress:"0",done:!1,error:null}]);let S=await fetch(t,{signal:i(this,y).signal,body:_,method:b,headers:A,priority:"high",redirect:"follow"});if(!S.ok)throw new Error('HTTP status for "'.concat(k,'": ').concat(S.status));let K=S.headers.get("Content-Length");if(K!==null&&(C=K),C>0){if(Number.isInteger(ne)&&C<ne*1048576)throw new Error('Minimum file size not met for "'.concat(k,'" (').concat((C/1048576).toFixed(3),"MB)"));if(Number.isInteger(te)&&C>te*1048576)throw new Error('Maximum file size exceeded for "'.concat(k,'" (').concat((C/1048576).toFixed(3),"MB)"))}let V=S.body.getReader(),oe=!1,ae=0;for(;;){let{done:Le,value:ie}=await V.read();if(typeof ie<"u"){if(!await i(this,d).ipc.diskStorage.outputFilesAppend(i(this,m),s,k,Buffer.from(ie),te))throw new Error('Could not save "'.concat(k,'"'));if(new Date().getTime()-x>=h*1e3)throw new Error('Download timed out for "'.concat(k,'" after ').concat(h,"s"));ae+=ie.length}if(!oe||C>0){oe=!0;let le=C>0?(ae/C*100).toFixed(2):"0";i(this,d).ibc.send(j.WINDOW_MAIN,"ibc-target:download:info",[i(this,m),p,{fileName:k,totalBytes:C,progress:le,done:!1,error:null}])}if(i(this,y).signal.aborted)throw new Error('Download cancelled for "'.concat(k,'"'));if(Le){re();break}}}catch(S){return re("".concat(S.message??S)),await i(this,d).ipc.diskStorage.outputFilesDelete(i(this,m),s,k),null}return We});a(this,"makeRequest",async(s,e="GET",t={},n={},r=!0,o=600)=>{await i(this,c).call(this,10);let{body:l,method:h,headers:p}=i(this,Y).call(this,e,t,n,r),x=setTimeout(()=>i(this,y).abort("Request timed out after ".concat(o,"s")),o*1e3);try{if(i(this,y).signal.aborted)throw new Error("Request cancelled");let _=await fetch(s,{signal:i(this,y).signal,body:l,method:h,headers:p,priority:"high",redirect:"follow"});if(!_.ok)throw new Error("HTTP status: ".concat(_.status));return r?await _.json():await _.text()}finally{clearTimeout(x)}});a(this,"saveUrl",async(s,e,t,n=600)=>(t=new URL(t).toString(),setTimeout(()=>{let r=document.createElement("a");r.href=t,r.style.display="none",r.download=t.replace(/\/+$/g,"").replace(/^.*\//g,"")||e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},250),await i(this,d).ipc.target.saveDownload(i(this,m),s,e,n)));a(this,"clickAt",async(s,e,t=!1)=>{await i(this,c).call(this,10);let n=await i(this,M).call(this,s,e,t?"double-click":"click");return n&&await i(this,H).call(this,s,e),n});a(this,"clickOn",async(s,e=!1)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);if(!(t instanceof Element))return!1;await i(this,N).call(this,t);let n=i(this,P).call(this,t);return await this.clickAt(n.x,n.y,e)});a(this,"hoverAt",async(s,e)=>await i(this,M).call(this,s,e));a(this,"hoverOn",async s=>{await i(this,c).call(this,10);let e=i(this,g).call(this,s);if(!(e instanceof Element))return!1;await i(this,N).call(this,e);let t=i(this,P).call(this,e);return await i(this,M).call(this,t.x,t.y)});a(this,"hoverCenter",async()=>{await i(this,c).call(this,10),await i(this,H).call(this,i(this,w).x??0,i(this,w).y??0);let s=Math.round(window.innerWidth||document.documentElement.clientWidth)/2,e=Math.round(window.innerHeight||document.documentElement.clientHeight)/2;return await i(this,M).call(this,s,e)});a(this,"jiggle",async(s=10)=>{if(await i(this,c).call(this,10),!Number.isInteger(s)||s<1)return!1;let e=Math.floor(Math.random()*3)+5,t=[];for(let r=1;r<=e;r++){let o=Math.floor(Math.random()*(s/2))+Math.round(s/2),l=Math.floor(Math.random()*360)*(Math.PI/180),h=i(this,w).x+o*Math.cos(l),p=i(this,w).y+o*Math.sin(l);t.push({x:h,y:p})}t.push(i(this,w));let n=i(this,z).call(this);for(let r of t)await i(this,d).ipc.target.mouse(i(this,m),r.x,r.y,null,!0,n),v(this,w,{...r,name:null});return await i(this,c).call(this,q),!0});a(this,"type",async(s,e,t=!1,n=!1,r=50)=>{await i(this,c).call(this,10),typeof e!="string"&&(e=""),r=parseInt(r,10),r=Number.isInteger(r)?r>250?250:r<25?25:r:50;let o=i(this,g).call(this,s);if(!i(this,ee).call(this,o))return!1;await i(this,N).call(this,o);let l=i(this,P).call(this,o),h=await i(this,d).ipc.target.typeAt(i(this,m),l.x,l.y,e,t,r);return n&&await i(this,d).ipc.target.sendKeys(i(this,m),"enter"),await i(this,c).call(this,q),h});a(this,"typeAt",async(s,e,t,n=!1,r=!1,o=50)=>{await i(this,c).call(this,10),typeof t!="string"&&(t=""),o=parseInt(o,10),o=Number.isInteger(o)?o>250?250:o<25?25:o:50;let l=await i(this,d).ipc.target.typeAt(i(this,m),s,e,t,n,o);return r&&await i(this,d).ipc.target.sendKeys(i(this,m),"enter"),await i(this,c).call(this,q),l});a(this,"select",async(s,e)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);if(!(t instanceof HTMLSelectElement))return!1;e=(Array.isArray(e)?e:[e]).map(o=>"".concat(o)),await i(this,N).call(this,t),t.focus();let n=process.platform==="darwin"&&!t.multiple;if(n&&(t.multiple=!0),t.multiple){for(let o of t.options)(e.includes(o.value)?!o.selected:o.selected)&&(o.selected=e.includes(o.value));await i(this,c).call(this,25+Math.floor(Math.random()*26));for(let o=0;o<=1;o++)await i(this,d).ipc.target.sendKeys(i(this,m),"space",{ctrl:!0}),await i(this,c).call(this,25+Math.floor(Math.random()*26))}else{let o=Array.from(t.options).map(l=>l.value).indexOf(e[0]);if(o!==-1){t.value=e[0],await i(this,c).call(this,25+Math.floor(Math.random()*26));let l=o===0?["right","left"]:["left","right"];for(let h of l)await i(this,d).ipc.target.sendKeys(i(this,m),h),await i(this,c).call(this,25+Math.floor(Math.random()*26))}}n&&(t.multiple=!1),t.blur(),await i(this,H).call(this,i(this,w).x,i(this,w).y);let{bottom:r}=t.getBoundingClientRect();return await i(this,M).call(this,i(this,w).x,r+10),await i(this,c).call(this,q),!0});a(this,"check",async(s,e)=>{await i(this,c).call(this,10);let t=i(this,g).call(this,s);if(!(t instanceof Element)||t.tagName.toLowerCase()!=="input"||!["checkbox","radio"].includes(t.type.toLowerCase()))return!1;e=(Array.isArray(e)?e:[e]).map(r=>"".concat(r));let n=[];do{let r=t.closest("form")||document;if(!r)break;if(t.type.toLowerCase()==="checkbox"){let l=r.querySelectorAll('input[type="checkbox"][name="'.concat(CSS.escape(t.name),'"]'));for(let h of l)(e.includes(h.value)?!h.checked:h.checked)&&n.push(h);break}if(!e.length)break;let o=r.querySelectorAll('input[type="radio"][name="'.concat(CSS.escape(t.name),'"]'));for(let l of o)if(e[0]===l.value&&!l.checked){n.push(l);break}}while(!1);if(await i(this,c).call(this,250),n.length){for(let r of n){await i(this,N).call(this,r);let o=i(this,P).call(this,r);o!==null&&await this.clickAt(o.x,o.y)}await i(this,c).call(this,q)}return!0});v(this,m,s),v(this,d,new rt(j.getTargetChannelName(s),!1).getSdk());for(let e of Object.getOwnPropertyNames(this))typeof this[e]=="function"&&i(this,d).ibc.handle(e,this[e])}},m=new WeakMap,d=new WeakMap,L=new WeakMap,G=new WeakMap,w=new WeakMap,y=new WeakMap,c=new WeakMap,R=new WeakMap,g=new WeakMap,Z=new WeakMap,z=new WeakMap,M=new WeakMap,H=new WeakMap,P=new WeakMap,ee=new WeakMap,Q=new WeakMap,X=new WeakMap,N=new WeakMap,F=new WeakMap,Y=new WeakMap,Pe)});var ot=De(),qe=process.argv.filter(u=>u.indexOf("--agent-id=")>=0).shift();if(typeof qe=="string"){let u=qe.split("=")[1];u.length&&new ot(u)}
